/*
	http://wiki.kumbiaphp.com/Licencia	 New BSD License
*/
(function(a){a.KumbiaPHP={publicPath:null,plugin:[],cConfirm:function(c){var b=a(this);if(!confirm(b.data("msg"))){c.preventDefault()}},cFx:function(b){return function(e){e.preventDefault();var d=a(this),c=a("#"+d.data("to"));c[b]()}},cRemote:function(d){var c=a(this),b=a("#"+c.data("to"));d.preventDefault();b.load(this.href)},cRemoteConfirm:function(d){var c=a(this),b=a("#"+c.data("to"));d.preventDefault();if(confirm(c.data("msg"))){b.load(this.href)}},cFRemote:function(d){d.preventDefault();este=a(this);var c=a("[type=submit]",este);c.attr("disabled","disabled");var b=este.attr("action");var e=este.attr("data-to");a.post(b,este.serialize(),function(h,f){var g=a("#"+e);g.html(h);g.hide();g.show("slow");c.attr("disabled",null)})},cUpdaterSelect:function(b){var d=a(this),c=a("#"+d.data("update"));url=d.data("url");c.empty();a.get(url,{id:d.val()},function(f){for(i in f){var e=a("<option />").text(f[i]).val(i);c.append(e)}},"json")},bind:function(){a("body").on("click","a.js-confirm, input.js-confirm",this.cConfirm);a("body").on("click","a.js-remote",this.cRemote);a("body").on("click","a.js-remote-confirm",this.cRemoteConfirm);a("body").on("click","a.js-show",this.cFx("show"));a("body").on("click","a.js-hide",this.cFx("hide"));a("body").on("click","a.js-toggle",this.cFx("toggle"));a("body").on("click","a.js-fade-in",this.cFx("fadeIn"));a("body").on("click","a.js-fade-out",this.cFx("fadeOut"));a("body").on("submit","form.js-remote",this.cFRemote);a("body").on("change","select.js-remote",this.cUpdaterSelect);a.KumbiaPHP.bindDatePicker()},autoload:function(){var c=a("[class*='jp-']");a.each(c,function(e,g){var f=a(this);var d=f.attr("class").split(" ");for(e in d){if(d[e].substr(0,3)=="jp-"){if(a.inArray(d[e].substr(3),a.KumbiaPHP.plugin)!=-1){continue}a.KumbiaPHP.plugin.push(d[e].substr(3))}}});var b=a("head");for(i in a.KumbiaPHP.plugin){a.ajaxSetup({cache:true});b.append('<link href="'+a.KumbiaPHP.publicPath+"css/"+a.KumbiaPHP.plugin[i]+'.css" type="text/css" rel="stylesheet"/>');a.getScript(a.KumbiaPHP.publicPath+"javascript/jquery/jquery."+a.KumbiaPHP.plugin[i]+".js",function(d,e){})}},bindDatePicker:function(){var b=a("input.js-datepicker");var c=function(){b.each(function(){var e={monthSelector:true,yearSelector:true};var d=a(this);if(d.attr("min")!=undefined){e.dateMin=d.attr("min").split("-")}if(d.attr("max")!=undefined){e.dateMax=d.attr("max").split("-")}d.pickadate(e)})};if(typeof(a.pickadate)!="undefined"){return c()}a("head").append('<link href="'+this.publicPath+'css/pickadate.css" type="text/css" rel="stylesheet"/>');jQuery.ajax({dataType:"script",cache:true,url:this.publicPath+"javascript/jquery/pickadate.js"}).done(function(){c()})},initialize:function(){var b=a("script:last").attr("src");this.publicPath=b.substr(0,b.length-41);a(function(){a.KumbiaPHP.bind();a.KumbiaPHP.autoload()})}};a.KumbiaPHP.initialize()})(jQuery);
